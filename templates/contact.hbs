{{> head}}
<div class="relative overflow-x-auto shadow-md sm:rounded-lg">
<table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
<thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
<tr>
<th scope="col" class="px-6 py-3">First name</td>
<th scope="col" class="px-6 py-3">Last name</td>
    <th scope="col" class="px-6 py-3">Email</td>
    <th scope="col" class="px-6 py-3">Phone</td>
    <th scope="col" class="px-6 py-3">Created at</td>
    <th></th>
</tr>
</thead>
    <tbody>
    {{#each contacts}}
<tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
    <td class="px-6 py-4">{{this.first_name}}</td>
    <td class="px-6 py-4">{{this.last_name}}</td>
    <td class="px-6 py-4">{{this.email}}</td>
    <td class="px-6 py-4">{{this.phone}}</td>
    <td class="px-6 py-4">{{this.created_at}}</td>
    <td>
        <button class="px-6 py-4"
            hx-get="/contact/{{this.id}}/edit"
            hx-trigger="edit"
            _="on click
                if .editing is not empty
                 Swal.fire({title: 'Aready Editing',
                    showCancelButton: true,
                    confirmButtonText: 'yep, edit this row!',
                    text:'Hey!  You are already editing a row!  Do you 
                    want to cancel that edit and continue?'})   
                    if the result's isConfirmed is false
                         halt
                       end
                       send cancel to .editing
                     end
                     trigger edit">
            Edit
        </button>
    </td> 
</tr>
<tr hx-trigger='cancel' class='editing' hx-get="/contact/${contact.id}">
    <td><input name='name' value='{{this.name}}'></td>
    <td><input name='email' value='{{this.email}}'></td>
    <td>
      <button class="btn btn-danger" hx-get="/contact/{{this.id}}">
        Cancel
      </button>
      <button class="btn btn-danger" hx-put="/contact/{{this.id}}" hx-include="closest tr">
        Save
      </button>
    </td>
  </tr>
    {{/each}}
</tbody>
</table>
</div>
